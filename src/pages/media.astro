---
import BaseLayout from "../layouts/BaseLayout.astro";
import YouTube from "../components/YouTube.astro";
import Bandcamp from "../components/Bandcamp.astro";
import media from "../content/media.json";

// sécurité minimale
const audios = Array.isArray(media.audios) ? media.audios : [];
const videos = Array.isArray(media.videos) ? media.videos : [];
---
<BaseLayout title="Médias — Nevrosyne">
  <h1 class="text-3xl font-bold mb-6">Médias</h1>

<!--   {audios.length > 0 && (
    <section class="space-y-4 mb-10">
      <h2 class="text-xl font-semibold">Écouter</h2>
      <div class="grid md:grid-cols-2 gap-6">
        {audios.map((a) => (
          a.provider === "bandcamp" && <Bandcamp embedUrl={a.embedUrl} title={a.title} />
        ))}
      </div>
    </section>
  )} -->

  {videos.length > 0 && (
    <section class="space-y-4">
      <h2 class="text-xl font-semibold">Extraits concerts live</h2>
      <div class="grid md:grid-cols-2 gap-6">
        {videos.map((v) => (
          v.provider === "youtube" && <YouTube id={v.id} title={v.title} />
        ))}
      </div>
    </section>
  )}
</BaseLayout>