---
import BaseLayout from "../layouts/BaseLayout.astro";
import ClientsGrid from "../components/ClientsGrid.astro";
import clients from "../content/clients.json";
import SetListTable from "../components/SetListTable.astro";
import { loadSetlist } from "../lib/readSetList";
import { withBase } from "../utils/paths";
import TechSheet from "../components/TechSheet.astro";

// Charge le fichier Excel à la build (ok tel quel)
const setList = loadSetlist(new URL("../content/setListNevro.xlsx", import.meta.url));

const services = [
  {
    title: "Concerts / Live",
    desc: "Set rock/reprises et adaptations musicales. Scènes, festivals, événements privés.",
    points: ["Backline autonome possible", "Balance rapide", "Facture/contractualisation OK"],
    cta: { label: "Demander un devis", href: "/contact" }
  },
  {
    title: "Événementiel",
    desc: "Show adapté à votre événement (ouverture, afterwork, gala, lancement).",
    points: ["Setlist personnalisable", "Habillage visuel & logo", "Coordination régie"],
    cta: { label: "Parler de votre projet", href: "/contact" }
  }
];
---
<BaseLayout title="Prestations — Nevrosyne">
  <section class="mb-10">
    <h1 class="text-3xl font-bold mb-3">Prestations</h1>
    <p class="opacity-80">
      Vous êtes programmateur·rice, collectivité, agence ou production ? Voici ce que nous proposons.
      Pour toute demande spécifique, <a class="underline underline-offset-4" href={withBase("contact")}>contactez-nous</a>.
    </p>
  </section>

  <section class="grid md:grid-cols-2 gap-6">
    {services.map(s => (
      <div class="p-5 rounded-xl bg-coal-800/60 border border-zinc-800">
        <h2 class="text-xl font-semibold mb-2">{s.title}</h2>
        <p class="opacity-85 mb-4">{s.desc}</p>
        <ul class="list-disc list-inside space-y-1 mb-5 opacity-85">
          {s.points.map(p => <li>{p}</li>)}
        </ul>
        <a href={withBase(String(s.cta.href).replace(/^\//,''))}
           class="inline-block px-4 py-2 rounded-lg bg-ink-900 hover:bg-coal-700 border border-zinc-700">
          {s.cta.label}
        </a>
      </div>
    ))}
  </section>

<section class="mt-12">
  <h3 class="text-lg font-semibold mb-3">Informations techniques</h3>

  <div class="grid md:grid-cols-2 gap-6">
    <!-- Encadré gauche : fiche technique texte -->
    <div class="p-5 rounded-xl bg-coal-800/40 border border-zinc-800">
      <h4 class="font-semibold mb-3">Fiche technique</h4>
      <ul class="list-disc list-inside opacity-85 space-y-1">
        <li>Line-up : chant, 2 guitares, basse, batterie</li>
        <li>Besoin scène : voir fiche technique</li>
        <li>Patch : 16 voix min</li>
        <li>Puissance façade adaptée à la salle</li>
        <a
          href={withBase("docs/ft-nevrosyne-5ch-2.0-3.pdf")}
          target="_blank"
          class="mt-4 inline-block px-4 py-2 rounded-lg bg-ink-900 hover:bg-coal-700 border border-zinc-700"
        >
        Télécharger la fiche technique en pdf
      </a>
      </ul>
    </div>

    <!-- Encadré droit : vignette et lien PDF -->
    <div class="p-5 rounded-xl bg-coal-800/40 border border-zinc-800 flex flex-col items-center justify-center text-center">
      <a href={withBase("docs/ft-nevrosyne-5ch-2.0-3.pdf")} target="_blank" class="group">
        <img
          src={withBase("docs/ft-nevrosyne-5ch-2.0-3-thumb.jpg")}
          alt="Fiche technique Nevrosyne 5ch"
          class="w-80 md:w-80 rounded-lg border border-zinc-700 shadow-lg group-hover:scale-105 transition-transform duration-300"
          loading="lazy"
        />
      </a>

    </div>
  </div>
</section>

  <section class="mt-12">
    <h3 class="text-lg font-semibold mb-3">Ils nous ont fait confiance</h3>
    <p class="opacity-80 mb-4">Quelques structures, salles et organismes avec lesquels nous avons collaboré.</p>
    <ClientsGrid items={clients} />
  </section>

  <section class="mt-12">
    <h3 class="text-lg font-semibold mb-3">Setlist</h3>
    <p class="opacity-80 mb-4">
      Exemple de set (évolutif selon l’événement). Autres morceaux sur demande.
    </p>
    <SetListTable rows={setList} />
  </section>  
</BaseLayout>